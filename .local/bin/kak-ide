#!/bin/bash 

server_name=$(basename `pwd`)
socket_file=$(kak -l | grep $server_name)
window_title="Kakoune -"

if [[ $socket_file == "" ]]; then
  kak -d -s $server_name &
  kitty @ set-window-title "$window_title main"
  kak -c $server_name -e 'ide'
  kitty @ set-window-title --temporary ''
else
  echo "unable to start daemon, socket in use?"
  exit 1
fi
