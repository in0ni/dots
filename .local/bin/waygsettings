#!/bin/sh

# usage: import-gsettings <gsettings key>:<settings.ini key> <gsettings key>:<settings.ini key> ...

expressions="BEGIN{FS=\" = \"}"
for pair in "$@"; do
    IFS=:; set -- $pair
    # expressions="$expressions -e 's:^$2 = (.*)$:gsettings set org.gnome.desktop.interface $1 \1:e'"
    expressions="$expressions /^$2/{ print \"gsettings set org.gnome.desktop.interface $1 \\\"\" \$2 \"\\\"\" }"
done
IFS=
eval awk '$expressions' "${XDG_CONFIG_HOME:-$HOME/.config}"/gtk-3.0/settings.ini | sh
